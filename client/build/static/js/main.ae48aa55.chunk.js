(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{145:function(e,t){},147:function(e,t){},163:function(e,t,n){},164:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(10),i=n.n(c),r=n(21),l=n(206),o=n(204),s=n(199),d=n(194),j=n(197),b=n(166),u=n(101),m=n.n(u),x=n(100),O=n.n(x),p=n(22),h=n(94),f=n(65),g=n.n(f),v=n(4),C=Object(a.createContext)(),k=Object(h.io)("https://video-app-a.herokuapp.com/"),y=function(e){var t=e.children,n=Object(a.useState)(!1),c=Object(p.a)(n,2),i=c[0],r=c[1],l=Object(a.useState)(!1),o=Object(p.a)(l,2),s=o[0],d=o[1],j=Object(a.useState)(),b=Object(p.a)(j,2),u=b[0],m=b[1],x=Object(a.useState)(""),O=Object(p.a)(x,2),h=O[0],f=O[1],y=Object(a.useState)({}),N=Object(p.a)(y,2),w=N[0],I=N[1],A=Object(a.useState)(""),D=Object(p.a)(A,2),V=D[0],W=D[1],S=Object(a.useRef)(),B=Object(a.useRef)(),T=Object(a.useRef)();Object(a.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){m(e),S.current.srcObject=e})),k.on("me",(function(e){return W(e)})),k.on("callUser",(function(e){var t=e.from,n=e.name,a=e.signal;I({isReceivingCall:!0,from:t,name:n,signal:a})}))}),[]);return Object(v.jsx)(C.Provider,{value:{call:w,callAccepted:i,myVideo:S,userVideo:B,stream:u,name:h,setName:f,callEnded:s,me:V,callUser:function(e){var t=new g.a({initiator:!0,trickle:!1,stream:u});t.on("signal",(function(t){k.emit("callUser",{userToCall:e,signalData:t,from:V,name:h})})),t.on("stream",(function(e){B.current.srcObject=e})),k.on("callAccepted",(function(e){r(!0),t.signal(e)})),T.current=t},leaveCall:function(){d(!0),T.current.destroy(),window.location.reload()},answerCall:function(){r(!0);var e=new g.a({initiator:!1,trickle:!1,stream:u});e.on("signal",(function(e){k.emit("answerCall",{signal:e,to:w.from})})),e.on("stream",(function(e){B.current.srcObject=e})),e.signal(w.signal),T.current=e},toggleVideo:function(){u.getVideoTracks()[0].enabled=!u.getVideoTracks()[0].enabled},muteCall:function(){u.getAudioTracks()[0].enabled=!u.getAudioTracks()[0].enabled}},children:t})},N=Object(d.a)((function(e){return{video:Object(r.a)({outlineWidth:"thick"},e.breakpoints.down("xs"),{outlineWidth:"thick"}),gridContainer:Object(r.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),buttonGridContainer:Object(r.a)({outlineWidth:"thick",display:"flex",justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column",borderLeft:"2px solid black",borderBottom:"2px solid black"}),paper:{padding:"10px",border:"2px solid black",margin:"10px"}}})),w=function(){var e=Object(a.useContext)(C),t=e.name,n=e.callAccepted,c=e.myVideo,i=e.userVideo,r=e.callEnded,o=e.stream,d=e.call,u=e.toggleVideo,x=e.muteCall,p=N();return Object(v.jsxs)("div",{style:{fontFamily:"Avenir"},children:[Object(v.jsxs)(j.a,{container:!0,className:p.gridContainer,children:[o&&Object(v.jsx)(b.a,{className:p.paper,children:Object(v.jsxs)(j.a,{item:!0,xs:12,md:6,children:[Object(v.jsx)(s.a,{variant:"h5",gutterBottom:!0,children:t||"NAME"}),Object(v.jsx)("video",{playsInline:!0,muted:!0,ref:c,autoPlay:!0,className:p.video})]})}),n&&!r&&Object(v.jsx)(b.a,{className:p.paper,children:Object(v.jsxs)(j.a,{item:!0,xs:12,md:6,children:[Object(v.jsx)(s.a,{variant:"h5",gutterBottom:!0,children:d.name||"NAME"}),Object(v.jsx)("video",{playsInline:!0,ref:i,autoPlay:!0,className:p.video})]})})]}),Object(v.jsxs)(j.a,{container:!0,className:p.gridContainer,children:[Object(v.jsx)(j.a,{item:!0,xs:12,md:6,className:p.buttonGridContainer,children:Object(v.jsx)(l.a,{variant:"contained",color:"primary",className:p.button,startIcon:Object(v.jsx)(O.a,{}),onClick:u,children:"Video"})}),Object(v.jsx)(j.a,{item:!0,xs:12,md:6,className:p.buttonGridContainer,children:Object(v.jsx)(l.a,{variant:"contained",color:"primary",className:p.button,startIcon:Object(v.jsx)(m.a,{}),onClick:x,children:"Mic"})})]})]})},I=n(200),A=n(205),D=n(102),V=n(201),W=n(202),S=n(203),B=Object(d.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(r.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(r.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"2px solid black"}}})),T=function(e){var t=e.children,n=Object(a.useContext)(C),c=n.me,i=n.callAccepted,r=n.name,o=n.setName,d=n.callEnded,u=n.leaveCall,m=n.callUser,x=Object(a.useState)(""),O=Object(p.a)(x,2),h=O[0],f=O[1],g=B();return Object(v.jsx)(I.a,{className:g.container,children:Object(v.jsxs)(b.a,{elevation:10,className:g.paper,children:[Object(v.jsx)("form",{className:g.root,noValidate:!0,autoComplete:"off",children:Object(v.jsxs)(j.a,{container:!0,className:g.gridContainer,children:[Object(v.jsxs)(j.a,{item:!0,xs:12,md:6,className:g.padding,children:[Object(v.jsx)(s.a,{gutterBottom:!0,variant:"h6",children:"Account Info"}),Object(v.jsx)(A.a,{label:"Name",value:r,onChange:function(e){return o(e.target.value)},fullWidth:!0}),Object(v.jsx)(D.CopyToClipboard,{text:c,className:g.margin,children:Object(v.jsx)(l.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(v.jsx)(V.a,{fontSize:"large"}),children:"Copy Your ID"})})]}),Object(v.jsxs)(j.a,{item:!0,xs:12,md:6,className:g.padding,children:[Object(v.jsx)(s.a,{gutterBottom:!0,variant:"h6",children:"Make a call"}),Object(v.jsx)(A.a,{label:"ID to call",value:h,onChange:function(e){return f(e.target.value)},fullWidth:!0}),i&&!d?Object(v.jsx)(l.a,{variant:"contained",color:"secondary",startIcon:Object(v.jsx)(W.a,{fontSize:"large"}),fullWidth:!0,onClick:u,className:g.margin,children:"Hang Up"}):Object(v.jsx)(l.a,{variant:"contained",color:"primary",startIcon:Object(v.jsx)(S.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return m(h)},className:g.margin,children:"Call"})]})]})}),t]})})},E=function(){var e=Object(a.useContext)(C),t=e.answerCall,n=e.call,c=e.callAccepted;return Object(v.jsx)(v.Fragment,{children:n.isReceivingCall&&!c&&Object(v.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(v.jsxs)("h1",{children:[n.name," is calling:"]}),Object(v.jsx)(l.a,{variant:"contained",color:"primary",onClick:t,children:"Answer"})]})})},U=n(103),M=n.n(U),P=Object(d.a)((function(e){return{appBar:Object(r.a)({margin:"30px 100px",display:"inline",flexDirection:"row",justifyContent:"center",alignItems:"center",outlineWidth:"thick",borderLeft:"2px solid black",borderBottom:"2px solid black"},e.breakpoints.down("xs"),{outlineWidth:"thick"}),image:{marginTop:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",outlineWidth:"thick"}}})),R=function(){var e=P();return Object(v.jsxs)("div",{className:e.wrapper,style:{fontFamily:"Avenir"},children:[Object(v.jsx)(l.a,{variant:"contained",color:"primary",startIcon:Object(v.jsx)(M.a,{}),onClick:function(e){return window.location.href="http://localhost:5000"},children:"LOGOUT"}),Object(v.jsx)(o.a,{className:e.appBar,position:"static",color:"inherit",children:Object(v.jsx)(s.a,{variant:"h3",align:"center",children:"VIDEO APP"})}),Object(v.jsx)(w,{}),Object(v.jsx)(T,{children:Object(v.jsx)(E,{})})]})};n(163);i.a.render(Object(v.jsx)(y,{children:Object(v.jsx)(R,{})}),document.getElementById("root"))}},[[164,1,2]]]);
//# sourceMappingURL=main.ae48aa55.chunk.js.map